<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

  <title>CSCI HW8</title>

</head>
<body>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="node_modules/chart.js/src/chart.js"></script>
<script src="bower_components/js/angular-local-storage.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>

<div class="card rounded main_container mt-lg-3" style="border-color: black">
  <div class="main_header">Weather Search</div>
  <div class="main_form">
    <form [formGroup]="inputForm">
      <div class="form-group row">
        <label for="inputStreet" class="col-lg-3 col-form-label">Street <span style="color: red">*</span></label>
        <div class="col-lg-8">
          <input matInput type="text" class="form-control" id="inputStreet" formControlName="inputStreet" placeholder="Enter Street Name" style="border-color: black" required>
          <div *ngIf="inputStreet.invalid && (inputStreet.dirty || inputStreet.touched)" class="form-warning">
            <div *ngIf="inputStreet.errors.required">
              <span style="color: red; font-size: small"> Please enter a street. </span>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label for="inputCity" class="col-lg-3 col-form-label">City <span style="color: red">*</span></label>
        <div class="col-lg-8">
          <input matInput type="text" class="form-control" id="inputCity" formControlName="inputCity" placeholder="Enter City Name" style="border-color: black" required [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let city of autoCities" [value]="city" style="background-color: white; color: black">
              {{ city }}
            </mat-option>
          </mat-autocomplete>
          <div *ngIf="inputCity.invalid && (inputCity.dirty || inputCity.touched)" class="form-warning">
            <div *ngIf="inputCity.errors.required">
              <span style="color: red; font-size: small"> Please enter a city. </span>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label for="inputState" class="col-lg-3 col-form-label">State <span style="color: red">*</span></label>
        <div class="col-lg-8">
          <select class="custom-select col-lg-6" id="inputState" formControlName="inputState" [(ngModel)]="defaultState">
            <option selected value="default">Select State</option>
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="DC">District Of Columbia</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-10">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="inputCheckBox" (change)="changeInputCheckBox()">
            <label class="form-check-label" for="inputCheckBox">
              Current location
            </label>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <button type="submit" class="btn main_button ml-lg-3 ml-3" id="ButtonSearch" [disabled]="!inputFormValid" (click)="clickSearch()">
          <i class="material-icons">search</i> Search
        </button>
        <button type="reset" class="btn main_button ml-lg-3 ml-3" id="ButtonClear" (click)="clearForm()">
          <i class="material-icons">clear_all</i> Clear
        </button>
      </div>
    </form>
  </div>
</div>

<!--show results and favorite buttons-->
<div class="mt-5 mb-5 container" id="btnResFav">
  <div class="row justify-content-center" style="text-align: center">
    <button type="button" id="ButtonRes" [class]="btnResCls" (click)="clickBtnRes()">
      Results
    </button>
    <button type="button" id="ButtonFav" [class]="btnFavCls" (click)="clickBtnFav()">
      Favorites
    </button>
  </div>
</div>

<!--progress bar-->
<div class="container" id="progressContainer" *ngIf="showResults && submitted && !loaded  && !inputInvalid && inputFormValid">
  <div class="progress">
    <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%;"></div>
  </div>
</div>

<!--results-->
<div id="weatherResults" class="mt-lg-8 mb-lg-8 col-lg-8 container" #weatherResults [hidden]="!(showResults && submitted && loaded && !inputInvalid)">
<!--<div id="weatherResults" class="mt-8 mb-8 container" #weatherResults *ngIf="showResults && submitted && loaded">-->
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link" [ngClass]="{ 'active':activeTab==='current'}" (click)="searchTab('current')" id="current-tab" data-toggle="tab" href="#cur" role="tab" aria-controls="cur" aria-selected="true" style="color: black">Current</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" [ngClass]="{ 'active':activeTab==='hourly'}" (click)="searchTab('hourly')" id="hourly-tab" data-toggle="tab" href="#hour" role="tab" aria-controls="hour" aria-selected="false" style="color: black">Hourly</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" [ngClass]="{ 'active':activeTab==='weekly'}" (click)="searchTab('weekly')" id="weekly-tab" data-toggle="tab" href="#week" role="tab" aria-controls="week" aria-selected="false" style="color: black">Weekly</a>
    </li>
<!--    <li class="col-lg-3 col-0"></li>-->
<!--    <li class="ml-auto">-->
    <li  class="float-right ml-auto">
      <a class="btnTwitter text-center" [href]="TweetText">
        <img src="http://csci571.com/hw/hw8/Images/Twitter.png" class="mr-2 float-right tweetLogo">
      </a>
    </li>
    <li class="float-right">
      <button type="buttom" class="btn col-lg-1" id="ButtonStarBorder" (click)="clickBtnStar()" *ngIf="btnStarIcon == 'star_border'">
        <i class="material-icons">{{btnStarIcon}}</i>
      </button>
      <button type="buttom" class="btn col-lg-1" id="ButtonStar" (click)="clickBtnStar()" *ngIf="btnStarIcon == 'star'" style="color: rgb(252, 207, 68)">
        <i class="material-icons">{{btnStarIcon}}</i>
      </button>
    </li>
  </ul>
  <div class="tab-content mt-lg-5 mb-lg-5 col-12" id="myTabContent">
    <!--  current tab   -->
    <div class="tab-pane fade" [ngClass]="{ 'active':activeTab==='current', 'show':activeTab==='current'}" id="cur" role="tabpanel" aria-labelledby="current-tab">
      <div class="card rounded container_cur mt-lg-5 mt-3 mb-2 currentCard">
        <div class="mb-2">
            <div class="row mt-lg-5 ml-lg-5 mr-lg-5 mt-3 ml-4 currentCardFontCity"> {{city}} </div>
            <div class="row ml-lg-5 mr-lg-5 ml-4 mr-2">
              <div class="col-7">
                <div class="row mt-lg-2 mt-0 currentCardFontCity" style="color: gray"> {{timezone}} </div>
                <div class="row mt-3 currentCardFontTemp">
                  <div> {{curTemp}} </div>
                  <div><img src="https://cdn3.iconfinder.com/data/icons/virtual-notebook/16/button_shape_oval-512.png" class="align-top mt-1 currentCardTempDegree"></div>
                  <div> F</div>
                </div>
                <div class="row mt-3 currentCardFontSum"> {{curSum}} </div>
              </div>
              <div class="col-lg-4 col-5 ml-auto mb-auto mt-auto">
<!--                <div>-->
                  <img #sealImgBox width="100%" src="" class="round" [src]="sealImg" style="border-radius: 50%;">
<!--                </div>-->
              </div>
            </div>
          <div class="row mt-lg-5 ml-lg-4 mr-lg-5 mt-4 ml-2 mr-2">
            <div class="col text-center">
              <img src="https://cdn2.iconfinder.com/data/icons/weather-74/24/weather-16-512.png" class="currentCardSymbol" ngbTooltip="Humidity" placement="top">
            </div>
            <div class="col text-center">
              <img src="https://cdn2.iconfinder.com/data/icons/weather-74/24/weather-25-512.png" class="currentCardSymbol" ngbTooltip="Pressure" placement="top">
            </div>
            <div class="col text-center">
              <img src="https://cdn2.iconfinder.com/data/icons/weather-74/24/weather-27-512.png" class="currentCardSymbol" ngbTooltip="WindSpeed" placement="top">
            </div>
            <div class="col text-center">
              <img src="https://cdn2.iconfinder.com/data/icons/weather-74/24/weather-30-512.png" class="currentCardSymbol" ngbTooltip="Visibility" placement="top">
            </div>
            <div class="col text-center">
              <img src="https://cdn2.iconfinder.com/data/icons/weather-74/24/weather-28-512.png" class="currentCardSymbol" ngbTooltip="CloudCover" placement="top">
            </div>
            <div class="col text-center">
              <img src="https://cdn2.iconfinder.com/data/icons/weather-74/24/weather-24-512.png" class="currentCardSymbol" ngbTooltip="Ozone" placement="top">
            </div>
          </div>
          <div class="row ml-lg-4 mr-lg-5 mb-lg-2 ml-2 mr-2 mt-1">
            <div class="col text-center currentCardSymbolValue"> {{curhum}} </div>
            <div class="col text-center currentCardSymbolValue"> {{curprs}} </div>
            <div class="col text-center currentCardSymbolValue"> {{curwid}} </div>
            <div class="col text-center currentCardSymbolValue"> {{curvib}} </div>
            <div class="col text-center currentCardSymbolValue"> {{curcld}} </div>
            <div class="col text-center currentCardSymbolValue"> {{curozo}} </div>
          </div>
        </div>
      </div>
<!---->
    </div>
    <!--  hourly tab   -->
    <div class="tab-pane fade" [ngClass]="{ 'active':activeTab==='hourly', 'show':activeTab==='hourly'}" id="hour" role="tabpanel" aria-labelledby="hourly-tab">
      <div class="row mt-lg-6 mt-5">
        <div class="col-lg-6">
          <select class="custom-select" id="hourMenu" (change)="updateHourChart()" #hourMenu>
            <option selected value="temperature"> Temperature </option>
            <option value="pressure"> Pressure </option>
            <option value="humidity"> Humidity </option>
            <option value="ozone"> Ozone </option>
            <option value="visibility"> Visibility </option>
            <option value="wind speed"> Wind Speed </option>
          </select>
        </div>
      </div>
      <div class="mt-3 mb-5">
        <div style="display: block" *ngIf="hourlyChartReady">
          <canvas baseChart
                  [datasets]="hourlyChartData"
                  [labels]="hourlyChartLabels"
                  [options]="hourlyChartOptions"
                  [legend]="hourlyChartLegend"
                  [chartType]="hourlyChartType">
          </canvas>
        </div>
      </div>
<!---->
    </div>
    <!--  weekly tab   -->
    <div class="tab-pane fade" [ngClass]="{ 'active':activeTab==='weekly', 'show':activeTab==='weekly'}" id="week" role="tabpanel" aria-labelledby="weekly-tab">
      <div class="mt-5">
        <div id="chartContainer" style="width: 100%;"></div>
      </div>
    </div>
  </div>
</div>

<!--  pop modal  -->
<ng-template #popCard let-modal>
  <div class="modal-header" style="background-color: rgb(92, 134, 161)">
    <h4 class="modal-title" id="modal-basic-title"> {{cardDate}} </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" style="background-color: rgb(127, 202, 237)">
    <div class="row">
      <div class="col-7">
        <div class="row mt-lg-4 ml-2" style="font-size: 28px;"> {{city}} </div>
        <div class="row mt-lg-2 ml-2" style="font-size: 32px;">
          <div> {{cardTemp}} </div>
          <div><img src="https://cdn3.iconfinder.com/data/icons/virtual-notebook/16/button_shape_oval-512.png" width="10" height="10" class="align-top mt-1"></div>
          <div> F</div>
        </div>
        <div class="row mt-lg-2 ml-2" style="font-size: 18px;"> {{cardSum}} </div>
      </div>
      <div class="col-4 ml-auto mb-auto mt-auto mr-auto">
        <div>
          <img width="100%" class="round" [src]="cardIconSrc">
        </div>
      </div>
    </div>
    <hr/>
    <div class="container col-lg-6 mr-lg-2">
      <p style="margin: auto">Precipitation: {{cardPrep}} </p>
      <p style="margin: auto">Chance of Rain: {{cardRain}} % </p>
      <p style="margin: auto">Wind Speed: {{cardWind}} mph </p>
      <p style="margin: auto">Humidity: {{cardHumd}} % </p>
      <p style="margin: auto">Visibility: {{cardVisb}} miles </p>
    </div>
  </div>
</ng-template>

<!--alert warning-->
<div class="container mb-5" *ngIf="showFavorites && islocalStorageEmpty()">
  <div class="alert alert-warning " role="alert" >
    No Records.
  </div>
</div>
<div class="container mb-5" *ngIf="submitted && inputInvalid && showResults">
  <div class="alert alert-warning " role="alert" >
    Invalid Address.
  </div>
</div>

<!--favorite table-->
<div class="container" *ngIf="showFavorites && !islocalStorageEmpty()">
  <table class="table table-striped favTab">
    <thead>
    <tr>
      <th>#</th>
      <th>Image</th>
      <th>City</th>
      <th>State</th>
      <th>Favorites</th>
    </tr>
    </thead>
    <tbody>
    <ng-container *ngFor="let content of favContent; let i = index">
      <tr>
        <td>{{i + 1}}</td>
        <td>
          <div>
            <img class="round favTabState" src="{{content['img']}}">
          </div>
        </td>
        <td class="col-2 col-lg-1">
          <button type="buttom" class="btn btnCity" id="ButtonCity" (click)="clickBtnCity(content['city'], content['state'])" ngbTooltip="{{content['city']}}">
            {{content['city']}}
          </button>
        </td>
        <td>{{content['state']}}</td>
        <td>
          <button type="buttom" class="btn btnDel" id="ButtonDel" (click)="clickBtnDel(content['city'])">
            <i class="material-icons">delete</i>
          </button>
        </td>
      </tr>
    </ng-container>
    </tbody>
  </table>
</div>

</body>
</html>
